<html>

<head>
    <title>Tactical Money Planning - Visual</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        /* FORMATTING FUNCTIONS */

        function roundToTwoDecimalPlaces(number) {
            return Math.round(number * 100) / 100;
        }

        function formatForDisplay(number) {
            return roundToTwoDecimalPlaces(number).toLocaleString('en-ZA', {
                style: 'currency',
                currency: 'ZAR'
            });
        }

        incomeList = [{
            "name": "Ruan",
            value: 32062.77
        }, {
            "name": "Jessi",
            value: 11655
        }];

        fixedExpencesList = [{
            "name": "Rent",
            value: 8500
        }, {
            "name": "Car Payment",
            value: 4078.50
        }, {
            "name": "Medical Aid",
            value: 3129
        }, {
            "name": "Retirement Annuity",
            value: 1560
        }, {
            "name": "Domestic Work",
            value: 1500
        }, {
            "name": "Car/Household Insurance",
            value: 751.36
        }, {
            "name": "Income Protector",
            value: 645.05
        }, {
            "name": "Internet",
            value: 607.50
        }, {
            "name": "Electricity",
            value: 500
        }, {
            "name": "Municipal Rates",
            value: 500
        }, {
            "name": "Car Service Plan",
            value: 253.41
        }, {
            "name": "Bank Charges",
            value: 200
        }, {
            "name": "Websites",
            value: 118
        }, {
            "name": "Car Paint Insurance",
            value: 99
        }];

        google.charts.load('current', {
            'packages': ['sankey']
        });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            // Dynamic Charts
            combinedIncomeString = "Income (" + formatForDisplay(incomeList.reduce(function(accumulator, entry) {
                return accumulator + entry.value;
            }, 0)) + ")";

            // Current Charts
            ruan = "Ruan (R32,062.77 - Pfortner)";
            jessi = "Jessi (R11,655.00 - Young Engineers)"

            combinedIncome = "Income (R43717.77)";
            fixedExpences = "Fixed Expences (R22,441.82)";
            livingExpences = "Living Expences (R11,275.95)";
            savings = "Savings (R10,000)";

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Weight');

            data.addRows([
                [ruan, combinedIncome, 32062.77],
                [jessi, combinedIncome, 11655],

                [combinedIncome, fixedExpences, 22441.82],
                [fixedExpences, 'Rent (R8,500)', 8500],
                [fixedExpences, 'Car Payment (R4,078.50)', 4078.50],
                [fixedExpences, 'Medical Aid (R3,129)', 3129],
                [fixedExpences, 'Retirement Annuity (R1,560)', 1560],
                [fixedExpences, 'Domestic Work (R1,500)', 1500],
                [fixedExpences, 'Insurance (R751.36)', 751.36],
                [fixedExpences, 'Income Protector (R645.05)', 645.05],
                [fixedExpences, 'Internet (R607.50)', 607.50],
                [fixedExpences, 'Electricity (R500)', 500],
                [fixedExpences, 'Municipal Rates (R500)', 500],
                [fixedExpences, 'Car Service Plan (R253.41)', 253.41],
                [fixedExpences, 'Bank Charges (R200)', 200],
                [fixedExpences, 'Websites (R118)', 118],
                [fixedExpences, 'Car Paint Insurance (R99)', 99],

                [combinedIncome, livingExpences, 11275.95],
                [livingExpences, 'Groceries (R6,874.36)', 6775.95],
                [livingExpences, 'Fun (R2,500)', 2500],
                [livingExpences, "Petrol (R2,000)", 2000],

                [combinedIncome, savings, 10000],
                [savings, "Lucy (R3,000)", 3000],
                [savings, "Pilates (R3,000)", 3000],
                [savings, "Anniversary (R4,000)", 4000]
            ]);

            // Sets chart options.
            var options = {
                sankey: {
                    node: {
                        interactivity: false,
                        nodePadding: 20,
                        width: 5,
                        label: {
                            fontSize: 15
                        },
                        interactivity: false
                    },
                }
            };

            // Instantiates and draws our chart, passing in some options.
            var chart = new google.visualization.Sankey(document.getElementById('sankey_basic1'));
            chart.draw(data, options);

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Weight');

            data.addRows([
                [ruan, combinedIncome, 32062.77],
                [jessi, combinedIncome, 11655],

                [combinedIncome, fixedExpences, 22441.82],
                [fixedExpences, 'Rent (R8,500)', 8500],
                [fixedExpences, 'Car Payment (R4,078.50)', 4078.50],
                [fixedExpences, 'Medical Aid (R3,129)', 3129],
                [fixedExpences, 'Retirement Annuity (R1,560)', 1560],
                [fixedExpences, 'Domestic Work (R1,500)', 1500],
                [fixedExpences, 'Insurance (R751.36)', 751.36],
                [fixedExpences, 'Income Protector (R645.05)', 645.05],
                [fixedExpences, 'Internet (R607.50)', 607.50],
                [fixedExpences, 'Electricity (R500)', 500],
                [fixedExpences, 'Municipal Rates (R500)', 500],
                [fixedExpences, 'Car Service Plan (R253.41)', 253.41],
                [fixedExpences, 'Bank Charges (R200)', 200],
                [fixedExpences, 'Websites (R118)', 118],
                [fixedExpences, 'Car Paint Insurance (R99)', 99],

                [combinedIncome, livingExpences, 11275.95],
                [livingExpences, 'Groceries (R6,874.36)', 6775.95],
                [livingExpences, 'Fun (R2,500)', 2500],
                [livingExpences, "Petrol (R2,000)", 2000],

                [combinedIncome, savings, 10000],
                [savings, "Kia Rio Early Settlement (R10,000)", 10000],
            ]);

            // Sets chart options.
            var options = {
                sankey: {
                    node: {
                        interactivity: false,
                        nodePadding: 20,
                        width: 5,
                        label: {
                            fontSize: 15
                        },
                    }
                }
            };

            // Instantiates and draws our chart, passing in some options.
            var chart = new google.visualization.Sankey(document.getElementById('sankey_basic2'));
            chart.draw(data, options);

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Weight');

            data.addRows([
                [ruan, combinedIncome, 32062.77],
                [jessi, combinedIncome, 11655],

                [combinedIncome, fixedExpences, 22441.82],
                [fixedExpences, 'Rent (R8,500)', 8500],
                [fixedExpences, 'Car Payment (R4,078.50)', 4078.50],
                [fixedExpences, 'Medical Aid (R3,129)', 3129],
                [fixedExpences, 'Retirement Annuity (R1,560)', 1560],
                [fixedExpences, 'Domestic Work (R1,500)', 1500],
                [fixedExpences, 'Insurance (R751.36)', 751.36],
                [fixedExpences, 'Income Protector (R645.05)', 645.05],
                [fixedExpences, 'Internet (R607.50)', 607.50],
                [fixedExpences, 'Electricity (R500)', 500],
                [fixedExpences, 'Municipal Rates (R500)', 500],
                [fixedExpences, 'Car Service Plan (R253.41)', 253.41],
                [fixedExpences, 'Bank Charges (R200)', 200],
                [fixedExpences, 'Websites (R118)', 118],
                [fixedExpences, 'Car Paint Insurance (R99)', 99],

                [combinedIncome, livingExpences, 11275.95],
                [livingExpences, 'Groceries (R6,874.36)', 6775.95],
                [livingExpences, 'Fun (R2,500)', 2500],
                [livingExpences, "Petrol (R2,000)", 2000],

                [combinedIncome, savings, 10000],
                [savings, "House Fund (R10,000)", 10000],
            ]);

            // Sets chart options.
            var options = {
                sankey: {
                    node: {
                        interactivity: false,
                        nodePadding: 20,
                        width: 5,
                        label: {
                            fontSize: 15
                        },
                    }
                }
            };

            // Instantiates and draws our chart, passing in some options.
            var chart = new google.visualization.Sankey(document.getElementById('sankey_basic3'));
            chart.draw(data, options);

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'From');
            data.addColumn('string', 'To');
            data.addColumn('number', 'Weight');

            data.addRows([
                [ruan, combinedIncome, 32062.77],
                [jessi, combinedIncome, 11655],

                [combinedIncome, fixedExpences, 22441.82],
                [fixedExpences, 'Rent (R8,500)', 8500],
                [fixedExpences, 'Car Payment (R4,078.50)', 4078.50],
                [fixedExpences, 'Medical Aid (R3,129)', 3129],
                [fixedExpences, 'Retirement Annuity (R1,560)', 1560],
                [fixedExpences, 'Domestic Work (R1,500)', 1500],
                [fixedExpences, 'Insurance (R751.36)', 751.36],
                [fixedExpences, 'Income Protector (R645.05)', 645.05],
                [fixedExpences, 'Internet (R607.50)', 607.50],
                [fixedExpences, 'Electricity (R500)', 500],
                [fixedExpences, 'Municipal Rates (R500)', 500],
                [fixedExpences, 'Car Service Plan (R253.41)', 253.41],
                [fixedExpences, 'Bank Charges (R200)', 200],
                [fixedExpences, 'Websites (R118)', 118],
                [fixedExpences, 'Car Paint Insurance (R99)', 99],

                [combinedIncome, livingExpences, 11275.95],
                [livingExpences, 'Groceries (R6,874.36)', 6775.95],
                [livingExpences, 'Fun (R2,500)', 2500],
                [livingExpences, "Petrol (R2,000)", 2000],

                [combinedIncome, savings, 10000],
                [savings, "Kamonande Fund (R10,000)", 10000],
            ]);

            // Sets chart options.
            var options = {
                sankey: {
                    node: {
                        interactivity: false,
                        nodePadding: 20,
                        width: 5,
                        label: {
                            fontSize: 15
                        },
                    }
                }
            };

            // Instantiates and draws our chart, passing in some options.
            var chart = new google.visualization.Sankey(document.getElementById('sankey_basic4'));
            chart.draw(data, options);
        }
    </script>
</head>

<body>
    <div class="container-fluid">
        <div class="page-header">
            <h1>Monthly Budget Visual Representation</h1>
        </div>

        <h2>February 2017</h2>
        <div id="sankey_basic1" style="width: 100%; height: 600px;"></div>

        <h2>March 2017</h2>
        <div id="sankey_basic2" style="width: 100%; height: 600px;"></div>

        <h2>April 2017</h2>
        <div id="sankey_basic3" style="width: 100%; height: 600px;"></div>

        <h2>May 2017</h2>
        <div id="sankey_basic4" style="width: 100%; height: 600px;"></div>

    </div>
</body>

</html>